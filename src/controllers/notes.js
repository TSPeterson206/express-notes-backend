const notesModel = require('../models/notes')

///////////////////////////////////////////////////////////////////////////////
// Create
///////////////////////////////////////////////////////////////////////////////

function create(req, res, next){
  const newNote = notesModel.create(req.body)

  if(newNote.error) return next( { status: 400, message: newNote })
  
  res.status(201).send({ data: newNote })
}

///////////////////////////////////////////////////////////////////////////////
// Read All
///////////////////////////////////////////////////////////////////////////////

function readAll(req, res, next){
  const notes = notesModel.getAll()
  
  res.send({data: notes})
}

///////////////////////////////////////////////////////////////////////////////
// Read One
///////////////////////////////////////////////////////////////////////////////

function readOne(req, res, next){
  const note = notesModel.getOne(req.params.noteId)

  if(!note) return next({status: 404, message: note })

  res.status(200).send(note)
}

///////////////////////////////////////////////////////////////////////////////
// Delete
///////////////////////////////////////////////////////////////////////////////

function remove(req, res, next){
  const note = notesModel.remove(req.params.noteId)

  if(!note) return next({status: 404, message: note })

  res.status(200).send(note)
}


module.exports = { create, readAll, readOne, remove }

